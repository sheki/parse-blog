<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://sheki.in/favicon.ico><link rel=stylesheet href=/css/style.min.css><script>const vantaraPrefix="VNT";window._vantara_prefix=vantaraPrefix,window[`${vantaraPrefix}_script`]="cdn.vantara.ai/vantara-browser-api.js",window[`${vantaraPrefix}_productId`]="prd_00000000000000000000000001",window[`${vantaraPrefix}_clientKey`]="key_s/OSk4v2rA72WtID+I9FEz5zITqaf4UUI7diJm1X0hA6WgQgf97crc1eoYZpvXHqpfhNU2IK6To/v7HUknAbXA==",window[`${vantaraPrefix}_endpoint`]="https://in.vantara.ai",function(e,t,n){const s=t.createElement("script");s.type="module",s.async=!0,s.crossOrigin="anonymous",s.src=e[`${n}_script`].startsWith("/")?e[`${n}_script`]:"https://"+e[`${n}_script`];const o=t.getElementsByTagName("script")[0];o.parentNode.insertBefore(s,o)}(window,document,vantaraPrefix)</script><link rel=canonical href=https://sheki.in/note/software_engineering/><title>Software Engineering</title></head><body><header id=banner><h2><a href=https://sheki.in/>shekispeaks</a></h2><nav><ul></ul></nav></header><main id=content><article><header id=post-header><h1>Software Engineering</h1><div><time>October 27, 2023</time></div></header><h2 id=databases>Databases</h2><ul><li><a href=https://github.com/brettwooldridge/HikariCP/wiki/About-Pool-Sizing>Connection pools should be smaller than you think.</a></li><li><a href=https://sophiebits.com/2020/01/01/fast-maintainable-db-patterns.html>Data loading pattern</a></li><li><a href=https://brandur.org/two-phase-render>Two Phase Data load and render</a></li></ul><h2 id=heading></h2><h2 id=software-rewrites>Software Rewrites</h2><h3 id=dropbox-does-some-rewriting>Dropbox does some rewriting</h3><p><a href=https://dropbox.tech/infrastructure/rewriting-the-heart-of-our-sync-engine>https://dropbox.tech/infrastructure/rewriting-the-heart-of-our-sync-engine</a></p><h3 id=rewrite-dlgooglecom-in-go>Rewrite dl.google.com in Go.</h3><p><a href=https://talks.golang.org/2013/oscon-dl.slide#1>Google rewrote the service that serves chrome and other downloads in Go.</a></p><ul><li>Replace existing Cpp service with modern Go code.</li><li>Rebuild the binary to meet existing unit tests</li><li>Send traffic to both old and new services.</li><li>Re-architect the system, collapse two different services into one.</li><li>Advantages<ul><li>cleaner maintainable code,</li><li>new service is faster as it can be concurrent and use more CPU cores.</li><li>It can use newer APIs of the dependent services -> e.g. file storage API</li></ul></li></ul><h4 id=lessons>Lessons</h4><ul><li>Don&rsquo;t lock yourself to a line by line rewrite.</li><li>Try to keep improving the architecture.</li></ul><h3 id=slack-rebuilds-the-deskop-client>Slack Rebuilds the deskop client</h3><p><a href=https://slack.engineering/rebuilding-slack-on-the-desktop-308d6fe94ae4>Slack rebuilt their primary desktop app using React and a new multi team
architecture.</a></p><h4 id=goals>Goals</h4><p>Clients do not notice any different between clients. The interface is not
defined in a spec, but still exists.</p><ul><li>Still, software codebases have life spans</li><li>Rewrite to get away from legacy technologies - jQuery and dom manipulation.</li><li>New technology pardigm (React) came along which was a step function improvement.</li><li>Older app assumed a single app within a single process, that assumption
was no longer true as lot of people are signed into multiple slack teams
at any given point of time.</li><li>Create a “modern” section of the codebase that would be future-proof.</li><li>Rebuild the app piece by piece, have a way to use modern pieces in the
existing app, so that you can get feedback on a smaller surface area.</li><li>Conventional wisdom states that rewrites are best avoided, but sometimes the benefits are too great to ignore.</li><li>Much easy to new use new technology like Service workers from the new codebase.</li></ul></article></main><footer id=footer></footer></body></html>